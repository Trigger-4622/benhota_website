<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Projects â€” Ben Hota</title>
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet" />
	<style>
		*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

		:root {
			--bg-primary: #0a0a0f;
			--bg-secondary: #12121a;
			--bg-card: rgba(255, 255, 255, 0.04);
			--bg-card-hover: rgba(255, 255, 255, 0.07);
			--bg-glass: rgba(255, 255, 255, 0.06);
			--border: rgba(255, 255, 255, 0.08);
			--border-hover: rgba(255, 255, 255, 0.15);
			--text-primary: #e8e8ed;
			--text-secondary: rgba(255, 255, 255, 0.55);
			--text-muted: rgba(255, 255, 255, 0.3);
			--accent: #6366f1;
			--accent-glow: rgba(99, 102, 241, 0.3);
			--accent2: #8b5cf6;
			--radius: 16px;
			--radius-sm: 10px;
			--radius-xs: 6px;
			--font: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
			--mono: 'JetBrains Mono', 'Fira Code', monospace;
			--transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		}

		html { font-size: 16px; }

		body {
			font-family: var(--font);
			background: var(--bg-primary);
			color: var(--text-primary);
			min-height: 100vh;
			overflow-x: hidden;
			line-height: 1.6;
			-webkit-font-smoothing: antialiased;
			-moz-osx-font-smoothing: grayscale;
		}

		/* â”€â”€ Animated gradient background â”€â”€ */
		.bg-gradient {
			position: fixed;
			inset: 0;
			z-index: 0;
			overflow: hidden;
			pointer-events: none;
		}
		.bg-gradient::before {
			content: '';
			position: absolute;
			top: -50%;
			left: -50%;
			width: 200%;
			height: 200%;
			background: radial-gradient(ellipse at 20% 50%, rgba(99, 102, 241, 0.08) 0%, transparent 50%),
						radial-gradient(ellipse at 80% 20%, rgba(139, 92, 246, 0.06) 0%, transparent 50%),
						radial-gradient(ellipse at 50% 80%, rgba(6, 182, 212, 0.05) 0%, transparent 50%);
			animation: bgShift 20s ease-in-out infinite;
		}
		@keyframes bgShift {
			0%, 100% { transform: translate(0, 0) rotate(0deg); }
			33% { transform: translate(2%, -1%) rotate(1deg); }
			66% { transform: translate(-1%, 2%) rotate(-1deg); }
		}
		.bg-gradient::after {
			content: '';
			position: absolute;
			inset: 0;
			background: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
			opacity: 0.4;
		}

		/* â”€â”€ Layout â”€â”€ */
		.page-wrapper {
			position: relative;
			z-index: 1;
			display: flex;
			flex-direction: column;
			align-items: center;
			min-height: 100vh;
			padding: 3rem 2rem;
		}

		/* â”€â”€ Header â”€â”€ */
		.page-header {
			text-align: center;
			margin-bottom: 2.5rem;
			animation: fadeInUp 0.6s ease-out;
		}

		@keyframes fadeInUp {
			from { opacity: 0; transform: translateY(16px); }
			to { opacity: 1; transform: translateY(0); }
		}

		.page-header h1 {
			font-size: 2rem;
			font-weight: 700;
			letter-spacing: -0.03em;
			margin-bottom: 0.75rem;
			background: linear-gradient(135deg, #fff 0%, rgba(255,255,255,0.7) 100%);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
		}

		.back-link {
			display: inline-flex;
			align-items: center;
			gap: 0.4rem;
			font-size: 0.82rem;
			color: var(--text-secondary);
			text-decoration: none;
			border: 1px solid var(--border);
			border-radius: 100px;
			padding: 0.4rem 1rem;
			transition: var(--transition);
			backdrop-filter: blur(12px);
			-webkit-backdrop-filter: blur(12px);
			background: var(--bg-glass);
			margin-bottom: 0.75rem;
		}
		.back-link:hover {
			background: var(--bg-card-hover);
			border-color: var(--border-hover);
			color: var(--text-primary);
			transform: translateX(-2px);
		}

		.project-count {
			font-family: var(--mono);
			font-size: 0.72rem;
			color: var(--text-muted);
			letter-spacing: 0.05em;
		}

		/* â”€â”€ Grid â”€â”€ */
		.project-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
			gap: 1rem;
			width: 100%;
			max-width: 920px;
			animation: fadeInUp 0.6s ease-out 0.15s both;
		}

		/* â”€â”€ Card â”€â”€ */
		.project-card {
			background: var(--bg-glass);
			border: 1px solid var(--border);
			border-radius: var(--radius);
			padding: 1.5rem;
			text-decoration: none;
			color: inherit;
			display: flex;
			flex-direction: column;
			gap: 0.5rem;
			transition: var(--transition);
			backdrop-filter: blur(12px);
			-webkit-backdrop-filter: blur(12px);
			position: relative;
			overflow: hidden;
		}
		.project-card::before {
			content: '';
			position: absolute;
			top: 0;
			left: 0;
			right: 0;
			height: 2px;
			background: linear-gradient(90deg, var(--accent), var(--accent2));
			opacity: 0;
			transition: opacity var(--transition);
		}
		.project-card:hover {
			border-color: var(--border-hover);
			background: var(--bg-card-hover);
			transform: translateY(-3px);
			box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
		}
		.project-card:hover::before {
			opacity: 1;
		}

		.project-card h2 {
			font-size: 1rem;
			font-weight: 600;
			letter-spacing: -0.01em;
		}

		.project-card p {
			font-size: 0.82rem;
			color: var(--text-secondary);
			line-height: 1.5;
		}

		.project-card .card-arrow {
			position: absolute;
			right: 1.25rem;
			top: 1.5rem;
			color: var(--text-muted);
			font-size: 0.85rem;
			transition: var(--transition);
		}
		.project-card:hover .card-arrow {
			color: var(--accent);
			transform: translateX(3px);
		}

		/* â”€â”€ Tags â”€â”€ */
		.tags {
			display: flex;
			flex-wrap: wrap;
			gap: 0.3rem;
			margin-top: 0.3rem;
		}
		.tag {
			font-family: var(--mono);
			font-size: 0.6rem;
			color: var(--accent);
			border: 1px solid rgba(99, 102, 241, 0.2);
			border-radius: 100px;
			padding: 0.15em 0.6em;
			letter-spacing: 0.03em;
			text-transform: uppercase;
		}

		/* â”€â”€ States â”€â”€ */
		.empty-state, .error-state, .loading-state {
			text-align: center;
			padding: 4rem 1rem;
			grid-column: 1 / -1;
		}

		.empty-state {
			color: var(--text-muted);
			font-size: 0.9rem;
		}
		.empty-state .empty-icon {
			font-size: 2.5rem;
			margin-bottom: 1rem;
			opacity: 0.5;
		}

		.error-state {
			color: #ef4444;
			font-size: 0.85rem;
		}

		.loading-state {
			color: var(--text-muted);
			font-size: 0.85rem;
		}
		.loading-state .spinner {
			display: inline-block;
			width: 20px;
			height: 20px;
			border: 2px solid var(--border);
			border-top-color: var(--accent);
			border-radius: 50%;
			animation: spin 0.8s linear infinite;
			margin-bottom: 0.75rem;
		}
		@keyframes spin { to { transform: rotate(360deg); } }

		/* â”€â”€ Responsive â”€â”€ */
		@media (max-width: 640px) {
			.page-wrapper { padding: 2rem 1rem; }
			.page-header h1 { font-size: 1.5rem; }
			.project-grid { grid-template-columns: 1fr; gap: 0.75rem; }
		}
	</style>
</head>
<body>
	<div class="bg-gradient"></div>

	<div class="page-wrapper">
		<div class="page-header">
			<a class="back-link" href="/">&larr; Back to Home</a>
			<h1>Projects</h1>
			<p class="project-count" id="status"></p>
		</div>

		<div class="project-grid" id="grid">
			<div class="loading-state">
				<div class="spinner"></div>
				<p>Loading projects...</p>
			</div>
		</div>
	</div>

	<script>
		var REPO = 'Trigger-4622/benhota_website';
		var FOLDER = 'projects';
		var API = 'https://api.github.com/repos/' + REPO + '/contents/' + FOLDER;

		function formatName(name) {
			return name
				.replace(/[-_]/g, ' ')
				.replace(/\b\w/g, function(c) { return c.toUpperCase(); });
		}

		function fetchMeta(dirName) {
			var url = API + '/' + dirName + '/meta.json';
			return fetch(url)
				.then(function(r) {
					if (!r.ok) throw new Error('no meta');
					return r.json();
				})
				.then(function(data) {
					var decoded = atob(data.content.replace(/\n/g, ''));
					return JSON.parse(decoded);
				})
				.catch(function() {
					return null;
				});
		}

		function createCard(href, name, description, tags) {
			var a = document.createElement('a');
			a.className = 'project-card';
			a.href = href;

			var h2 = document.createElement('h2');
			h2.textContent = name;
			a.appendChild(h2);

			if (description) {
				var p = document.createElement('p');
				p.textContent = description;
				a.appendChild(p);
			}

			if (tags && tags.length) {
				var tagsDiv = document.createElement('div');
				tagsDiv.className = 'tags';
				tags.forEach(function(tag) {
					var span = document.createElement('span');
					span.className = 'tag';
					span.textContent = tag;
					tagsDiv.appendChild(span);
				});
				a.appendChild(tagsDiv);
			}

			var arrow = document.createElement('span');
			arrow.className = 'card-arrow';
			arrow.innerHTML = '&rarr;';
			a.appendChild(arrow);

			return a;
		}

		fetch(API)
			.then(function(r) {
				if (!r.ok) throw new Error('GitHub API returned ' + r.status);
				return r.json();
			})
			.then(function(items) {
				var dirs = [];
				var files = [];

				items.forEach(function(item) {
					if (item.type === 'dir') {
						dirs.push(item.name);
					} else if (
						item.type === 'file' &&
						item.name.endsWith('.html') &&
						item.name !== 'index.html'
					) {
						files.push(item.name);
					}
				});

				if (dirs.length === 0 && files.length === 0) {
					document.getElementById('grid').innerHTML =
						'<div class="empty-state"><div class="empty-icon">ðŸ“‚</div><p>No projects yet.<br>Add a folder to /projects/ and push.</p></div>';
					document.getElementById('status').textContent = '0 projects';
					return;
				}

				var promises = dirs.map(function(dirName) {
					return fetchMeta(dirName).then(function(meta) {
						return {
							type: 'dir',
							folderName: dirName,
							name: (meta && meta.name) ? meta.name : formatName(dirName),
							description: (meta && meta.description) ? meta.description : null,
							tags: (meta && meta.tags) ? meta.tags : []
						};
					});
				});

				files.forEach(function(fileName) {
					var baseName = fileName.replace('.html', '');
					promises.push(Promise.resolve({
						type: 'file',
						fileName: fileName,
						name: formatName(baseName),
						description: null,
						tags: ['HTML']
					}));
				});

				return Promise.all(promises);
			})
			.then(function(projects) {
				if (!projects) return;

				projects.sort(function(a, b) {
					return a.name.localeCompare(b.name);
				});

				var grid = document.getElementById('grid');
				grid.innerHTML = '';

				projects.forEach(function(proj, i) {
					var href = proj.type === 'dir'
						? proj.folderName + '/'
						: proj.fileName;
					var card = createCard(href, proj.name, proj.description, proj.tags);
					card.style.animation = 'fadeInUp 0.5s ease-out ' + (i * 0.08) + 's both';
					grid.appendChild(card);
				});

				var count = projects.length;
				document.getElementById('status').textContent =
					count + ' project' + (count !== 1 ? 's' : '') + ' found';
			})
			.catch(function(err) {
				document.getElementById('grid').innerHTML =
					'<div class="error-state"><p>Failed to load projects: ' + err.message + '</p></div>';
			});
	</script>
</body>
</html>
